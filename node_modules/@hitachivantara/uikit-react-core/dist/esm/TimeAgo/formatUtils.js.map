{"version":3,"file":"formatUtils.js","sources":["../../../src/TimeAgo/formatUtils.ts"],"sourcesContent":["const isDateInPeriod = (\n  timeAgoMs: number,\n  period: \"tomorrow\" | \"afterTomorrow\",\n  referenceDate = new Date(),\n) => {\n  const date = new Date(timeAgoMs);\n\n  const startOfToday = new Date(referenceDate);\n  startOfToday.setHours(0, 0, 0, 0);\n  const startOfTomorrow = new Date(startOfToday);\n  startOfTomorrow.setDate(startOfToday.getDate() + 1);\n  const startOfDayAfterTomorrow = new Date(startOfTomorrow);\n  startOfDayAfterTomorrow.setDate(startOfTomorrow.getDate() + 1);\n\n  if (period === \"tomorrow\") {\n    return date >= startOfTomorrow && date < startOfDayAfterTomorrow;\n  }\n  if (period === \"afterTomorrow\") {\n    return date >= startOfDayAfterTomorrow;\n  }\n  return false;\n};\n\n/**\n * Relative time thresholds defined by\n * {@link https://xd.adobe.com/view/1b7df235-5cf8-4b51-a2f0-0be1bb591c55-4e2e/ Design System}\n */\nexport const formatTimeAgo = (\n  timeAgoMs: number,\n  locale: Intl.LocalesArgument,\n  showSeconds = false,\n  referenceDate = new Date(),\n) => {\n  const relFormatter = new Intl.RelativeTimeFormat(locale, { numeric: \"auto\" });\n  const dayFormatter = new Intl.DateTimeFormat(locale, {\n    hour: \"numeric\",\n    minute: \"numeric\",\n    second: showSeconds ? \"numeric\" : undefined,\n  });\n  const weekFormatter = new Intl.DateTimeFormat(locale, {\n    weekday: \"short\",\n    hour: \"numeric\",\n    minute: \"numeric\",\n    second: showSeconds ? \"numeric\" : undefined,\n  });\n  const fullFormatter = new Intl.DateTimeFormat(locale, {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n    hour: \"numeric\",\n    minute: \"numeric\",\n    second: showSeconds ? \"numeric\" : undefined,\n  });\n  const date = new Date(timeAgoMs);\n  const secsInDay =\n    date.getHours() * 3600 + date.getMinutes() * 60 + date.getSeconds();\n  const secsInWeek = date.getDay() * 86400 + secsInDay;\n\n  const secsAgo = Math.floor((referenceDate.getTime() - timeAgoMs) / 1000);\n  const minsAgo = Math.floor(secsAgo / 60);\n\n  switch (true) {\n    case isDateInPeriod(timeAgoMs, \"afterTomorrow\", referenceDate):\n      return fullFormatter.format(date);\n    case isDateInPeriod(timeAgoMs, \"tomorrow\", referenceDate):\n      return `${relFormatter.format(1, \"days\")}, ${dayFormatter.format(date)}`;\n    case minsAgo < -60: // Future date more than 1 hour ahead\n      return `${relFormatter.format(0, \"days\")}, ${dayFormatter.format(date)}`;\n    case minsAgo < -2: // Future date more than 2 minutes ahead\n      return relFormatter.format(-minsAgo, \"minutes\");\n    case secsAgo < 0: // Future date within 1 minute\n      return `${relFormatter.format(Math.abs(secsAgo), \"seconds\")}`;\n    case secsAgo < 20:\n      return relFormatter.format(0, \"seconds\");\n    case minsAgo < 2:\n      return relFormatter.format(-secsAgo, \"seconds\");\n    case minsAgo < 60:\n      return relFormatter.format(-minsAgo, \"minutes\");\n    case secsAgo < secsInDay: // today\n      return `${relFormatter.format(0, \"days\")}, ${dayFormatter.format(date)}`;\n    case secsAgo < secsInDay + 86400: // yesterday\n      return `${relFormatter.format(-1, \"days\")}, ${dayFormatter.format(date)}`;\n    case secsAgo < secsInWeek: // this week\n      return weekFormatter.format(date);\n    default:\n      return fullFormatter.format(date);\n  }\n};\n"],"names":[],"mappings":"AAAA,MAAM,iBAAiB,CACrB,WACA,QACA,gBAAgB,oBAAI,WACjB;AACG,QAAA,OAAO,IAAI,KAAK,SAAS;AAEzB,QAAA,eAAe,IAAI,KAAK,aAAa;AAC3C,eAAa,SAAS,GAAG,GAAG,GAAG,CAAC;AAC1B,QAAA,kBAAkB,IAAI,KAAK,YAAY;AAC7C,kBAAgB,QAAQ,aAAa,QAAQ,IAAI,CAAC;AAC5C,QAAA,0BAA0B,IAAI,KAAK,eAAe;AACxD,0BAAwB,QAAQ,gBAAgB,QAAQ,IAAI,CAAC;AAE7D,MAAI,WAAW,YAAY;AAClB,WAAA,QAAQ,mBAAmB,OAAO;AAAA,EAAA;AAE3C,MAAI,WAAW,iBAAiB;AAC9B,WAAO,QAAQ;AAAA,EAAA;AAEV,SAAA;AACT;AAMa,MAAA,gBAAgB,CAC3B,WACA,QACA,cAAc,OACd,gBAAoB,oBAAA,WACjB;AACG,QAAA,eAAe,IAAI,KAAK,mBAAmB,QAAQ,EAAE,SAAS,QAAQ;AAC5E,QAAM,eAAe,IAAI,KAAK,eAAe,QAAQ;AAAA,IACnD,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ,cAAc,YAAY;AAAA,EAAA,CACnC;AACD,QAAM,gBAAgB,IAAI,KAAK,eAAe,QAAQ;AAAA,IACpD,SAAS;AAAA,IACT,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ,cAAc,YAAY;AAAA,EAAA,CACnC;AACD,QAAM,gBAAgB,IAAI,KAAK,eAAe,QAAQ;AAAA,IACpD,MAAM;AAAA,IACN,OAAO;AAAA,IACP,KAAK;AAAA,IACL,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,QAAQ,cAAc,YAAY;AAAA,EAAA,CACnC;AACK,QAAA,OAAO,IAAI,KAAK,SAAS;AACzB,QAAA,YACJ,KAAK,SAAA,IAAa,OAAO,KAAK,eAAe,KAAK,KAAK,WAAW;AACpE,QAAM,aAAa,KAAK,OAAO,IAAI,QAAQ;AAE3C,QAAM,UAAU,KAAK,OAAO,cAAc,QAAQ,IAAI,aAAa,GAAI;AACvE,QAAM,UAAU,KAAK,MAAM,UAAU,EAAE;AAEvC,UAAQ,MAAM;AAAA,IACZ,KAAK,eAAe,WAAW,iBAAiB,aAAa;AACpD,aAAA,cAAc,OAAO,IAAI;AAAA,IAClC,KAAK,eAAe,WAAW,YAAY,aAAa;AAC/C,aAAA,GAAG,aAAa,OAAO,GAAG,MAAM,CAAC,KAAK,aAAa,OAAO,IAAI,CAAC;AAAA,IACxE,KAAK,UAAU;AACN,aAAA,GAAG,aAAa,OAAO,GAAG,MAAM,CAAC,KAAK,aAAa,OAAO,IAAI,CAAC;AAAA,IACxE,KAAK,UAAU;AACb,aAAO,aAAa,OAAO,CAAC,SAAS,SAAS;AAAA,IAChD,KAAK,UAAU;AACN,aAAA,GAAG,aAAa,OAAO,KAAK,IAAI,OAAO,GAAG,SAAS,CAAC;AAAA,IAC7D,KAAK,UAAU;AACN,aAAA,aAAa,OAAO,GAAG,SAAS;AAAA,IACzC,KAAK,UAAU;AACb,aAAO,aAAa,OAAO,CAAC,SAAS,SAAS;AAAA,IAChD,KAAK,UAAU;AACb,aAAO,aAAa,OAAO,CAAC,SAAS,SAAS;AAAA,IAChD,KAAK,UAAU;AACN,aAAA,GAAG,aAAa,OAAO,GAAG,MAAM,CAAC,KAAK,aAAa,OAAO,IAAI,CAAC;AAAA,IACxE,KAAK,UAAU,YAAY;AAClB,aAAA,GAAG,aAAa,OAAO,IAAI,MAAM,CAAC,KAAK,aAAa,OAAO,IAAI,CAAC;AAAA,IACzE,KAAK,UAAU;AACN,aAAA,cAAc,OAAO,IAAI;AAAA,IAClC;AACS,aAAA,cAAc,OAAO,IAAI;AAAA,EAAA;AAEtC;"}